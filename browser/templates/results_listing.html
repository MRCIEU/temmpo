{% extends "onecolumn.html" %}

{% block title %}TeMMPo: My list{% endblock %}

{% block styles %}
<link rel="stylesheet" href="//cdn.datatables.net/1.10.5/css/jquery.dataTables.css" />
{% endblock %}

{% block scripts %}
<script src="//cdn.datatables.net/1.10.5/js/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {
    $('#results').DataTable({
        "columnDefs": [
            { "orderable": false, "targets": [ -1, -2 ],
             }
            ],
        "order": [ 1, 'desc' ],   {# TODO: Ensure in sync with listview ordering #}
    });
} );
</script>
{% endblock %}

{% block sectiontitle %}My list{% endblock %}

{% block section %}

<table id="results" class="dataTable display">
    <caption>Results</caption>
    <thead>
        <tr>
            <th scope="col" class="dt-left">Abstracts</th>
            <th scope="col" class="dt-left">Date criteria selected</th>
            <th scope="col" class="dt-left">Terms</th>
            <th scope="col" class="dt-left">Visualisations</th>
            <th scope="col" class="dt-left">Archives</th>
            <!-- th scope="col">Delete</th --> {# TODO Should each file & or only related searches be deletable #}
        </tr>
    </thead>
    <tbody>
        {% for result in results %}
        <tr>
            <th scope="row">{{ result.criteria.upload }}</th>
            <td>{{ result.criteria.created }}</td>
            <td>{{ result.mesh_filter }}</td> 
            <td><a href="{% url 'results' pk='{{ result.pk }}' %}" title="Visualisation of '{{ result.mesh_filter }}' over {{ result.criteria.upload }}">View result</a></td>
            <td><a href="#" title="Download visualisation of '{{ result.mesh_filter }}' over {{ result.criteria.upload }}">Download archive</a></td>
            <!-- <td>[X]</td> -->
        </tr>
        {% endfor %}
        {# TODO: Remove place holder output and loop through search results #}
        <tr>
            <th scope="row">citation-23001.txt</th>
            <td>23/02/2015</td>
            <td>Blood Transfusion</td>
            <td><a href="{% url 'results' pk='99' %}" title="Visualisation of 'Blood Transfusion' over citation-23001.txt">View result</a></td>
            <td><a href="#" title="Download visualisation of 'Blood Transfusion' over citation-23001.txt">Download archive</a></td>
            <!-- <td>[X]</td> -->
        </tr>
        <tr>
            <th scope="row">citation-99001.txt</th>
            <td>20/02/2015</td>
            <td>Coenzymes</td>
            <td><a href="{% url 'results' pk='99' %}" title="Visualisation of 'Coenzymes' over citation-99001.txt">View result</a></td>
            <td><a href="#" title="Download visualisation of 'Coenzymes' over citation-99001.txt">Download archive</a></td>
            <!-- <td>[X]</td> -->
        </tr>
    </tbody>
</table>

<div class="controls">
    <a href="{% url 'search' %}" class="button">New search</a>
</div>
{% endblock %}