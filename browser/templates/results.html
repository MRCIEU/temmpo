{% extends "onecolumncompact.html" %}
{% block title %}{{ results_page_title }}{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ STATIC_URL}}js/jquery-ui-1.12.1/jquery-ui.min.css">
{% endblock %}

{% block body_class_style %}results-page{% endblock %}

{% block section_title %}
Results
{% endblock %}

{% block page_heading %}
{% endblock %}

{% block section %}
<ul class="nav nav-tabs">
    <li><a href="{{ criteria_url }}">Search criteria</a>
    </li>
    <li {% if sankey_is_active %}class="active"{% endif %}><a href="{{ results_sankey_url }}">Mechanism visualisation</a>
    </li>
    <li {% if bubble_is_active %}class="active"{% endif %}><a href="{{ results_bubble_url }}">Score visualisation</a>
    </li>
</ul>

{# TODO: Include the article count, not currently pre-calculated nor stored anywhere #}
<!--
<p>
Total {{ article_count }} papers.
</p>
-->
{% if sankey_is_active %}
<div id="threshold-controller">
    <p>
      <label for="chart-slider-label">Top matches:</label> <input type="text" id="chart-slider-label" readonly> {% if search_result.mesh_filter %} filtered by <strong>{{ search_result.mesh_filter }}</strong> MeSH® term{% endif %}.
    </p>
    <div id="slider"></div>
</div>
<div id="sankey_multiple"></div>
{% endif %}

{% if bubble_is_active %}
<div id="bubble_chart"></div>
{% endif %}

<div id="results-buttons" class="form-group">
    <a href="{{ score_csv_url }}" class="btn btn-outline btn-default">Download scores as CSV</a> <a href="{{ abstract_ids_csv_url }}" class="btn btn-outline btn-default">Download abstract IDs as CSV</a>
</div>

{% endblock %}

{% block scripts %}
    {# Chart related JS libraries #}
    <script src="{{ STATIC_URL}}js/d3.min.js"></script>
    <script src="{{ STATIC_URL}}js/jquery-ui-1.12.1/jquery-ui.min.js"></script>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    {% include chart_js %}
{% endblock %}


{# Change to three tabs that are all urls chart, chart, criteria type #}
{# Always show download links #}