# Changelog

9.6.2   Apply Django security update
        Update Python dependencies and packaging tools

9.9.1   TMMA-505: Update email sending
        Update Python dependencies
        Update Cypress

9.9.0   TMMA-511: Upgrade Python from 3.8.x to 3.12.x
        TMMA-508: Resolve issue in tests after RHEL migration
        Apply MySQL Connector/Python connector security update
        TMMA-347: Set up RHEL8 development docker environment
        Update packages used to connect to redis
        Update Python dependencies
        Update version of MySQL used in GitHub actions

9.8.1   TMMA-509: Improve security of Python packaging tool
        Update Python packaging tool

9.8.0   Updated Django to 4.2.16 and updated other libraries
        Removed old Bitbucket IPs
        Update deployments for RHEL8 and apachectl compatibility

9.7.0   Update Python packaging tools
        Update Cypress
        Update version of MySQL used in GitHub actions

9.6.1   Update Python dependencies

9.6.0   Apply Django security update
        Update Python dependencies

9.5.0   Apply Django security update
        Update Python dependencies

9.4.0   Update Python packaging tools
        Update Python dependencies
        Prepare for RHEL migration - convert selenium tests to use Firefox

9.3.0   Make use of pypi index for django-clamd
        Update Cypress
        TMMA-506: Bug fix parsing OVID abstracts that include HTML tags at the start of a line.
        Bug fix sorting results table by date column

9.2.0   Apply Python dependencies security related updates

9.1.0   Apply Python dependency updates
        Update Python packaging tool - setuptools
        Update Cypress

9.0.9   Apply Python dependency updates

9.0.8   Apply Python dependency updates

9.0.7   Update Cypress
        Update Python packaging tool

9.0.6   Apply Python dependency updates

9.0.5   Update Cypress

9.0.4   Update Python packaging tool
        Apply Python dependency updates

9.0.3   Apply security update

9.0.2   Apply Python dependency updates

9.0.1   TMMA-436: Apply missing setting

9.0.0   TMMA-436: Upgrade Django to next LTS version

8.9.5   Apply Python dependency updates
        Update Python and related packaging tools
        Update Cypress

8.9.4   Apply Python dependency updates

8.9.3   Apply Django security update

8.9.2   Apply Python dependency and packaging tools updates
        TMMA-502: Remove unsed CI jobs DC1 hostnames references
        Update Cypress

8.9.1   Apply Python dependency updates
        Update Python packaging tools
        Update version of MySQL used in GitHub actions to match deployment environment

8.9.0   Apply Django security update
        Apply Python updates
        Update to use DC2 hosts

8.8.0   TMMA-499: Update jQuery & disable TRACK/TRACE methods
        TMMA-498: Upgrade mysql-connector-python
        Apply Python dependency updates
        Upgrade datatables

8.7.0   TMMA-494: Add support PubMed formatted files without a leading blank line
        Apply Python dependency updates

8.6.0   TMMA-338: Remove Python 2 dependency
        Apply Python packaging and dependency updates

8.5.3   Apply Django security update
        Apply Python packaging and dependency updates

8.5.2   Upgrade Cypress

8.5.1   Update Cypress

8.5.0   Apply Python updates

8.4.1   Apply Python updates
        Update GitHub actions

8.4.0   TMMA-417: Reduce creation of spam users accounts
        Apply Python updates
        TMMA-440: Add support for regenerating requirements file in Docker environment
        TMMA-457: Upgrade Cypress version to 12.x

8.3.4   Apply Python updates

8.3.3   Apply Python security and maintenace updates

8.3.2   Apply Python updates

8.3.1   Apply Python updates

8.3.0   Change log file rotation to be time vs space based
        Fix badly pinned dev dependencies
        Apply Python updates

8.2.0   Apply Python updates
        Update GitHub actions

8.1.1   Apply Python updates

8.1.0   Improve Jenkins CI jobs email notifications

8.0.2   Apply Python updates

8.0.1   Apply Django security updates
        Update third party Python dependencies and packaging tools #141
        Update Cypress
        TMMA-446: Bug fix acceptance tests browser upgrades
        Update GitHub actions usage of MySQL
        TMMA-447: Clear and regenerate pyc files #142

8.0.0   TMMA-437: Update third party Python eggs and packaging tools
        TMMA-443: Remove requires.io

7.9.0   Apply Django security update
        Update third party Python eggs and packaging tools
        Update jQuery UI

7.8.0   TMMA-433 Bug fix keep chromedriver insync with google-chrome.
        Use pip with hash checking mode for additional security
        Update third party Python eggs and packaging tools

7.7.0   TMMA-272 Add cookie statement and privacy policy
        TMMA-398 Resolve to a single domain
        Add favicon

7.6.0   Apply Django security update
        Update third party Python eggs

7.5.0   TMMA-429 Bug fix using correct version of virtualenv

7.4.0   TMMA-205 Add monitoring probe page
        Update third party Python eggs and packaging tools

7.3.0   Update lxml package

7.2.0   Update third party Python eggs and packaging tools

7.1.0   Update third party Python eggs and packaging tools

7.0.0   TMMA-424 Upgrade Python from 3.6.x to 3.8+
        Update third party Python eggs and packaging tools

6.4.0   TMMA-426 Update deployment scripts to remove any .exe files from pip environment

6.3.1   Apply security updates

6.3.0   TMMA-421 Apply Django security update

6.2.0   Update third party Python tools

6.1.0   TMMA-418 Enable general clean up of inactivated registrations

6.0.2   TMMA-420 Apply Django security update
        Update third party Python tools

6.0.1   TMMA-352 Update third party Python tools

6.0.0   TMMA-356 Upgrade to Django to latest long term supported version

5.0.0   TMMA-333 Upgrade Python from version 2.7.x to 3.6+

4.4.0   TMMA-406 Enable virus scanning on upload

4.3.0   TMMA-405 Add node IDs to JSON output
        TMMA-404 Reduce size of Sankey diagram

4.2.1   TMMA-401 Display number of mediators on Sankey and Bubble chart
        TMMA-400 Add download JSON from Sankey diagram option
        Update third party eggs and Python packing tools

4.2.0   TMMA-299 Changed labeling and size of Sankey diagram

4.1.1   TMMA-334 Bug fix sorting by mediator count on results listing table
        TMMA-397 Update wording, help page and tool tips

4.1.0   TMMA-391 Bug fix matching against MeSH Terms (or genes) that need escaping, e.g. H(+)-K(+)-Exchanging ATPase
        Improve speed of MeSH Term matching

4.0.1   Change website email address

4.0.0   TMMA-343 Bug fix matching MeSH terms with sub headings
                 Add support for matching MeSH sub headings
                 Bug fix matching new genes and ones at the very start of Abstract sections
                 Support case insensitive matching
        TMMA-383 Expand definition of Abstract IDs CSV in help page
        TMMA-384 Re-run version 4 of the matching algorithm

3.6.0   TMMA-382 Increase workers in matching queue

3.5.2   TMMA-93 Automate requires.io third party dependency checking

3.5.1   Improve debugging support

3.5.0   TMMA-381 Drop support for TLS 1.0 & 1.1

3.4.1   Minimal updates to Python packing tools

3.4.0   TMMA-372 Add code coverage report to test suite

3.3.2   TMMA-371 Improve security email based error logging

3.3.1   TMMA-370 Enable Github security alerts

3.3.0   TMMA-369 Apply Django security update 1.11.29

3.2.0   TMMA-368 Apply Django security update 1.11.28

3.1.0   TMMA-367 Apply Django security update 1.11.27
                 Update third party eggs

3.0.4   TMMA-364 Add link to code from TeMMPo home page

3.0.3   TMMA-361 Update Django to 1.11.25

3.0.2   TMMA-358 Update README
        TMMA-349 Add LICENSE file

3.0.1   TMMA-330 Bug fix handling OperationalError (2006, 'MySQL server has gone away')
                 Update third party eggs

3.0.0   TMMA-276 Update third party eggs
        TMMA-277 Increase file upload limit to 2000MB
        TMMA-278 Bug fix filtering searches when multiple years have been imported
        TMMA-275 Add support for uploading bz2 and gzip files
        TMMA-279 Add message queue to trigger running matching in the background
                 Add some caching
        TMMA-286 Reduce size of data structures when matching
                 Dropped support for generating .gv files
        TMMA-302 Add support for selenium acceptance testing
        TMMA-306 Bug fix matching more than one mediator MeSH term in an article
        TMMA-295 Bug fixed wording on the Bubble chart labels
        TMMA-307 Bug fix handling a gene synonym being an alias to more than one gene
        TMMA-315 Highlight where there are differences between v1 and v3 matching on the results pages
                 Dropped support for generating unused .csv files
        TMMA-314 Support downloading both versions of matching results
        TMMA-326 Add system message functionality around the search and results area.
        TMMA-327 Bug fix term/gene matching. Stop matching items that are subsets of others,
                 e.g. Genetic Markers matching with no longer match Genetic Markers/ge [Genetics]

2.8.3   TMMA-320 Upgrade Django to 1.11.21

2.8.2   TMMA-298 Bug fix sorting Bubble chart by top scores correctly

2.8.1   TMMA-274 Upgrade Django to 1.11.20

2.8.0   TMMA-268 Bug fix broken Sankey chart
        TMMA-270 Import 2019 MeSH Terms
        TMMA-108 Add Google Analytics
        TMMA-269 Upgrade Django to 1.11.x

2.7.0   TMMA-157 Make is clear when no results were found

2.6.1   TMMA-266 & TMMA-267 Bug fix and improve bubble chart

2.6.0   TMMA-228 12. Implementation of bubble charts
        TMMA-262 Add Fabric helper script 'fab add_missing_csv_headers_to_scores'
        TMMA-264 Data fix, ensure all previously generated CSV files may not have been quoted correctly

2.5.1   TMMA-260 Error related to SearchResults objects that have not started_processing when processing the has_failed property

2.5.0   TMMA-41 Implement periodically clean up of file uploads and or unused accounts
        TMMA-42 Add functionality to allow users to delete user account
        TMMA-43 Add functionality to allow delete abstract uploads & any associated search criteria and results
        TMMA-96 Add slider to adjust mediator count threshold for inclusion in plot
        TMMA-123 Investigate error processing a very large file
        TMMA-131 Update MeSH Terms
        TMMA-134 Addition of user documentation and clearer error messages
        TMMA-135 Headers on CSV file
        TMMA-136 Fixing the Sankey plot (code provided by Benjamin Elsworth)
        TMMA-201 Broken Sankey plot - very small and appearing in the bottom left
        TMMA-204 Re-running import mesh terms management command has incorrect top level terms
        TMMA-216 Upgrade Django to 1.11
        TMMA-231 The "top 50" in the Sankey plot doesn't seem to correspond to the top 50 by score in the csv output
        TMMA-232 Review and resolve TeMMPo vulnerability scan reports
        TMMA-233 Improve deselecting terms from MeSH term tree
        TMMA-240 Bug fix Gene and filter form
        TMMA-241 Improve CSV generation
        TMMA-242 Upgrade Django to 1.11.10
        TMMA-243 Bug rendering Genes in Filter form
        TMMA-246 Extend test suite
        TMMA-249 Create a subset of the current 2015 & 2018 mesh terms to speed up running the test suite
        TMMA-252 Upgrade Django to 1.11.x
        TMMA-253 Allow super users to delete searches and users
        TMMA-257 Bug fix cleaning up search criteria objects
        TMMA-259 Expand README

2.4.0   TMMA-203 Roll back any SQLlite mesh term limitation code
        TMMA-168 Bug fix: Investigate code within views which is selecting child mesh terms even if the tree is set not to
        TMMA-173 Bug fix: Tree does not automatically record all child Mesh Term ids when posting form
        Bug fix saving development emails to the file system
        Bug fix enabling maintenance mode during deployments
        Ensure bulk edit form field can also disable child Mesh Term selection

2.3.0   TMMA-132 Migrate to MySQL to support larger numbers of terms
                 Add a private settings file to store database credentials

2.2.0   TMMA-190 Apply Django security update 1.8.18

2.1.1   Add Apache configuration for maintenance mode
        Allow taggit fabric method to be run locally without password prompts for localhost

2.1     TMMA-196 Resolve issue with permissions in var directory

2.0     TMMA-130 Migrate project to be hosted on a Centos OS VM with SELinux enabled
                 Streamline and update third party eggs used
        TMMA-155 Bug fix parsing abstract files with errors
        TMMA-165 Replace logo with one provided by original designers
        TMMA-169 Added a Fabric deploy script
        TMMA-167 Add file size limits help text
        TMMA-170 Added Bitbucket Pipelines' Continuous Integration test runner definition file
        TMMA-191 Address Django security warnings

1.3.1   Add maintenance page

1.3     Merge documentation changes made by Tom Gaunt
        git fetch --all
        git checkout prod_stable
        git pull
        ../../bin/python manage.py collectstatic
        sudo /usr/sbin/apache2ctl configtest
        sudo /usr/sbin/apache2ctl restart

1.2     TMMA-138 Change of styling (CSS) and addition of logo
        git fetch --all
        git checkout prod_stable
        git pull
        ../../bin/python manage.py collectstatic
        sudo /usr/sbin/apache2ctl configtest
        sudo /usr/sbin/apache2ctl restart

1.1     TMMA-129 Upgrade Django to 1.8.15, plus upgrade oath2 and requests eggs
        Migrate repository to bitbucket.org

        In project directory:

        cd src/temmpo
        git remote rm origin
        git remote add origin git@bitbucket.org:researchit/temmpo.git
        git pull
        git branch --set-upstream prod_stable origin/prod_stable
        git pull
        ../../bin/pip install -r requirements/prod.txt
        ../../bin/python manage.py migrate
        ../../bin/python manage.py collectstatic
        sudo /usr/sbin/apache2ctl configtest
        sudo /usr/sbin/apache2ctl restart

1.0     TMMA-102 Allow SECRET_KEY to be generated and stored outside of the source tree

1.0 RC3 TMMA-124 Bug fix citations with missing mesh headings

1.0 RC2 TMMA-122 Increase abstract file size limit

1.0 RC1 TMMA-114 Add parsing of PubMed/MEDLINE files (BETA)
        TMMA-121 Bug fix string.find and zero indexed matches
        ../../bin/python manage.py migrate
        ../../bin/python manage.py collectstatic

0.9.9   TMMA-55 Upgrade Django to 1.8.x e.g.
        pip install Django==1.8.7
        ../../bin/python manage.py migrate
        ../../bin/python manage.py collectstatic

0.9.8   TMMA-115 Extend help text for file uploads

0.9.7   TMMA-113 Bug fix activating registration profiles: can't compare offset-naive and offset-aware datetimes
        Upgrade registration egg and run migrations, e.g.
        pip install django-registration-redux==1.2
        python manage.py migrate

0.9.6   TMMA-110 Handle when text file uploaded is not in MEDLINE format with Medical Subject Headings (MeSHÂ®)

0.9.5   Upgrade to Django 1.7.9 - run pip install Django==1.7.9

0.9.4   Increase file upload limit

0.9.3   TMMA-36 Validate file type & limit file size of abstract uploads

0.9.2   Bug fix usage of distinct
        Ensure display commas separated genes fro easier copying pasting when partially reusing search criteria

0.9.1   Bug fix matching terms that appear in multiple places in the MesH Term tree
        Use a compact header layout for results page

0.9     TMMA-5 Hide terms with no matches
        TMMA-106 Limit to show only the top 50 matches
        TMMA-105 Override default password reset email
        Update egg requirements
        TMMA-107 Reduce white space between header banner, page title, and with paragraphs
        Update wording
        Allow super user to view other users criteria and results

0.8     TMMA-30 Add link to download CSV of matches from results page
        TMMA-75 Enable term filtering, e.g. Human
        Install alternative autocomplete egg: django-selectable==0.9.0
        Remove django-autocomplete-light
        Upgrade Django to 1.7.8  ../../bin/pip install Django==1.7.8
        Update base and dev egg requirements
        Rename blocks and url names to use Django naming conventions
        TMMA-20 Wire up password reset and change forms
        Add more tests
        Batch add terms to avoid SQLlite limitations (TMMA-100 in progress)
        Refactor term selector form/view validation
        Ensure user cannot use the same terms for exposure, mediator and/or outcomes
        Show errors on term selector page
        Repopulate the bulk edit form field after errors
        Bug fix requesting external content over http not https
        Bug fix CSS

0.7.1   Bug fix form refactoring and fix saving terms via the tree  

0.7     Updated egg requirements
        Tidied urls
        Added search mesh term tree functionality
        Upgraded version of jstree library
        Remove unused files
        Add functionality to bulk clear or replace mesh terms
        Removed unused form cleaning code
        Refactored form classes
        Handle non unique mesh terms when using bulk edit input
        Display terms separated by semi colons

0.6     Update wording on home page

0.5     Need to update Django MPTT egg (used with MeshTerm trees) - ../../bin/pip install --upgrade django-mptt --no-deps

0.4

0.3

0.2     Deployment changes
        Bug fix Gene str name
        Make configuring genes in search form optional
        Ensure application can be served over www. sub domain

0.1     Initial release
